function pr(e){console.log(e)}function cleanArray(e){var t={},n=[];for(var r=0,i=e.length;r<i;++r){if(t.hasOwnProperty(e[r].data.i))continue;n.push(e[r]);t[e[r]]=1}return n}$(function(){function l(){for(var e=0;e<tameData.data.length;e++){var t="",n="";if(tameData.data[e].subnodes.length>0){t="expandable";n="hash-link"}$(i).append('<li class="color-'+(e+1)+" hash-list-item "+t+'"><a href="#" class="'+n+'" data-id="'+e+'" data-row="">'+tameData.data[e].node+"</a></li>")}$(".hash-link").on("click",function(){$(".hash-list-item").removeClass("active");$(".hash-list-item").addClass("inactive");$(this).parent().removeClass("inactive");$(this).parent().addClass("active");var e=$(this).attr("data-id");h(tameData.data[e],parseInt(e,10));return!1});$(".hash-link").mouseenter(function(){var e=parseInt($(this).attr("data-id"),10);r.highcharts().series[e].graph.attr("stroke-width","5")}).mouseleave(function(){var e=parseInt($(this).attr("data-id"),10);r.highcharts().series[e].graph.attr("stroke-width","2")})}function c(){f=[];var t=[];for(var n=0;n<tameData.data.length;n++){t=tameData.data[n].data;t.unshift([tameData.data[n].data[0][0]-(tameData.data[n].data[1][0]-tameData.data[n].data[0][0]),0]);f.push({id:n,name:tameData.data[n].node,type:"spline",data:t,color:e[n],lineWidth:2,threshold:0,events:{mouseOver:"",mouseOut:""}})}f.push(d(tameData.flags));m()}function h(t,n){f=[];$(o).text("");$(a).text("");var i=100/t.subnodes.length;for(var u=0;u<t.subnodes.length;u++){var l="",c="";if(t.subnodes[u].subnodes.length>0){l="expandable";c="category-link"}$(o).append('<li style="width:'+i+'%" class="color-'+(u+1)+" category-list-item "+l+'"><a href="#" class="'+c+' category-link-dummy" data-id="'+u+'">'+t.subnodes[u].node+"</a></li>");f.push({id:u,name:t.subnodes[u].node,type:"spline",data:t.subnodes[u].data,color:e[u],pointWidth:6,lineWidth:1,threshold:0,enableMouseTracking:!0})}f.push(d(t.flags));$(".category-link").on("click",function(){$(".category-tabs li").addClass("inactive");$(this).parent().removeClass("inactive");$(".category-list-item").removeClass("active");$(".category-list-item").addClass("inactive");$(this).parent().removeClass("inactive");$(this).parent().addClass("active");var e=$(this).attr("data-id");p(t.subnodes[e],n);return!1});$(".category-link-dummy").mouseenter(function(){var e=parseInt($(this).attr("data-id"),10);r.highcharts().series[e].graph.attr("stroke-width","5")}).mouseleave(function(){var e=parseInt($(this).attr("data-id"),10);r.highcharts().series[e].graph.attr("stroke-width","2")});$(s).removeClass("hidden");$(".hash-link").off("mouseenter");$(".hash-link").off("mouseleave");m();v()}function p(e,t){chartData=e.subnodes;f=[];$(a).text("");var i=100/chartData.length;for(var s=0;s<chartData.length;s++){$(a).append('<li style="width:'+i+'%" class="color-'+chartData[s].cat_id+'"><a href="#" class="detail-link" data-id="'+s+'">'+chartData[s].node+"</a></li>");f.push({id:s,name:chartData[s].node,type:"spline",data:chartData[s].data,color:n[chartData[s].cat_id],pointWidth:6,lineWidth:1,threshold:0,enableMouseTracking:!0})}f.push(d(tameData.data[t].flags));$(".detail-link").on("click",function(){$(".hash-list-item").removeClass("active");$(".hash-list-item").addClass("inactive");$(this).parent().removeClass("inactive");$(this).parent().addClass("active");var e=$(this).attr("data-id");h(tameData.data[e],parseInt(e,10));return!1});$(".detail-link").mouseenter(function(){var e=parseInt($(this).attr("data-id"),10);r.highcharts().series[e].graph.attr("stroke-width","5")}).mouseleave(function(){var e=parseInt($(this).attr("data-id"),10);r.highcharts().series[e].graph.attr("stroke-width","2")});$(u).removeClass("hidden");$(".category-link-dummy").off("mouseenter");$(".category-link-dummy").off("mouseleave");m();v()}function d(e){var t={type:"flags",useHTML:!0,name:"Tweets",title:".",shape:"url(img/tweet.svg)",width:16,showInLegend:!1,style:{color:"white"},data:[]};for(var n=0;n<e.length;n++){pr(e[n]);var r=e[n].data.t,i='<a href="https://www.twitter.com/'+e[n].data.user.j+"/status/"+e[n].data.i+'" target="_blank"><div class="tooltip-wrapper tweet-wrapper"><div class="account-group" data-user-id="'+e[n].data.user._id+'"><img class="avatar" src="'+e[n].data.user.im+'" alt=""><strong class="fullname">'+e[n].data.n+'</strong><span class="username"><s>@</s><b>'+e[n].data.user.j+'</b><span class="tweet-count">'+e[n].data.rc+' Retweets</span></span></div><p class="tweet-text">'+r+"</p></div></a>",s=i,o={x:e[n].date,id:n,title:"",text:s,events:{mouseOver:"",mouseOut:""}};t.data.push(o)}t.data.sort(function(e){return function(t,n){return t[e]===n[e]?0:t[e]<n[e]?-1:1}}("x"));return t}function v(e){typeof e=="undefined"&&(e=dateRange);var t=new Date;r.highcharts().xAxis[0].setExtremes(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()-e),Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))}function m(){r=$("#chart-container").highcharts("StockChart",{credits:{enabled:!1},legend:{enabled:!1,itemStyle:{cursor:"pointer",color:"#333333",fontSize:"9px"},itemMarginBottom:10,x:30,margin:20,symbolWidth:20},scrollbar:{enabled:!1},rangeSelector:{enabled:!1},title:{useHTML:!0,text:""},subtitle:{text:""},tooltip:{style:{fontSize:"11px",color:"#ffffff",padding:"0px"},backgroundColor:"rgba(255, 255, 255, 1)",borderColor:null,borderRadius:0,borderWidth:0,shadow:!0,useHTML:!0,formatter:function(){return this.series.name==="Tweets"?this.point.text:'<div class="tooltip-wrapper" style="background: '+this.point.series.color+';"><span>'+this.y+'</span> <span class="tooltip-hashtag">'+this.point.series.name+"</span></div>"},shared:!1},yAxis:{gridLineColor:"#f2f2f2",title:{text:"Anzahl User",style:{color:"#a0a0a0"}}},xAxis:{lineColor:"#f2f2f2"},navigator:{series:{color:"#a0a0a0",lineColor:"#a0a0a0"},xAxis:{labels:{enabled:!1}}},series:f})}Highcharts.setOptions({lang:{weekdays:["Sonntag","Montag","Dienstag","Mittwoch","Donenrstag","Freitag","Samstag"],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]}});var e=["#FF6600","#043A47","#087891","#653F7F","#B31D14","#DDC901","#22BBDD","#442000","#6D6E77","#9ED40D","#542A00"],t=["#9ED40D","#043A47","#087891","#653F7F","#B31D14","#DDC901","#22BBDD","#442000","#6D6E77","#9ED40D","#542A00"],n={pu:"#02151A",ps:"#B31D14",pg:"#9ED40D",pf:"#DDC901",pl:"#653F7F",pp:"#FF6600",px:"#22BBDD"},r,i=$(".hash-navigation ul"),s=$(".category-navigation"),o=$(".category-navigation ul"),u=$(".detail-navigation"),a=$(".detail-navigation ul"),f=[];$(".mode-navigation a").click(function(){$(".hash-list-item").removeClass("inactive");$(".hash-list-item").removeClass("active");$(s).addClass("hidden");$(o).text("");$(u).addClass("hidden");$(a).text("");r.highcharts().destroy();r="";c();$(".hash-link").mouseenter(function(){var e=parseInt($(this).attr("data-id"),10);r.highcharts().series[e].graph.attr("stroke-width","5")}).mouseleave(function(){var e=parseInt($(this).attr("data-id"),10);r.highcharts().series[e].graph.attr("stroke-width","2")});v()});l();c();v()});